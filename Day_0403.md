## 💡 연관성 분석 (Association Analysis)

- 연관성 규칙을 통해 하나의 거래나 사건에 포함되어 있는 `둘 이상의 품목 간 상호 연관성`을 발견해가는 과정
 - 데이터에 숨어있는 동시에 발생하는 사건 또는 항목들 사이의 규칙을 수치화하기 위해 연관 규칙 모델이 사용됨
- 고객이 동시에 구매하는 상품간의 관계를 분석하는 의미에서 **장바구니 분석(Market Basket Analysis)**라고도 함
- 추천 알고리즘에 속하며, Unsupervised 비지도(자율 학습) 기법에 해당
- 연관규칙(Association Rule): 항목들 간의 if item A → then item B 형태로 표현되는 유용한 패턴
 - Ex. {립스틱, 블러셔} => {파운데이션}, 조건{X} → 결과{Y} X가 발생하면 Y가 함께 발생한다.



### 연관규칙을 파악하는 척도

 1) 지지도 (Support): 전체 구매 건 수 가운데 상품 A와 B를 동시에 구매한 비율, `P[A*B]`로 나타냄 = (곱사건, 교집합)
 - 지지도(A → B): A와 B가 동시에 포함된 거래 건 수/ 전체 거래 건 수
 - 상품 A 1개에 대한 지지도는 지지도 A = A 거래 건수 / 전체 거래 건수

 2) 신뢰도(Confidence): 상품 A를 구매한 건수 가운데 B도 같이 구매한 비율, `조건부확률 P[B|A]`
 - 신뢰도(A → B): A와 B가 동시에 포함된 거래 건 수/ A 거래 건 수

 3) 향상도(Lift): '전체에서 상품 B를 구매한 비율에 비해 A를 구매한 고객이 B를 구매한 비율의 몇 배인가'를 의미
 - 향상도(A → B): 신뢰도(A → B) / 지지도(B)
 - 모형의 성능평가로 사용(연관성의 척도)
 - 향상도의 해석: 1초과 (A, B 상품 구매는 + 양의 영향력이 있다.), 1미만(A, B 상품 구매는 - 음의 영향력이 있다.), 1일 때 상호 연관성이 없으며 아이템 집합은 서로 독립



### 연역적(Apriori) 알고리즘

 - 품목들의 집함 별로 지지도, 신뢰도, 향상도 지표를 구해야 하는데, 품목 수가 많을 때는 연관규칙 탐색 비용, 시간, 복잡도가 증가함 (비효율적)
 => 더 이상 탐색하지 않아도 될 품목의 조합을 찾고, 그 조합을 부분 집합으로 갖는 품목의 집합들을 가지치기 (Pruning)하여, 효율적인 탐색을 하도록 함

 **최소지지도 가지치기(MSP, Minimum Support Pruning)**
 - 어떤 품목(집합)에 대한 지지도가 일정수준(threshold) 값을 넘지 못하면 그 품목(집합)이 포함된 조합들은 더 이상 탐색하지 않음
 
 **Frequent Pattern (FP) Growth Algorithm**
 - DB를 모든 중요한 정보를 가진 FP-tree라는 구조로 압축
 - 높은 빈도 세트와 관련된 조건부 데이터 세트로 분할, 규칙 생성
 - 전체 DB 검색 작업이 apriori 알고리즘 보다 줄어들어 높은 성능과 처리속도를 가지나, 구현이 apriori 알고리즘 보다 어려움



### 🚩 고려 사항
 1. 항목의 속성 level: 비즈니스 도메인 별로 구매, 거래품목의 메타정보의 항목 레벨에 대해 어느 정도의 레벨을 분석대상으로 할지 선정 (규칙에 대한 속성 세분화)
 2. 연관 규칙의 비즈니스적 의미 판단: 주요 연관규칙들이 생성된 후, 실질적으로 의미가 있는지 도메인 담당자, product owner와 상의하여 결과의 유용성 검토
 3. 순서 패턴 (Sequence Pattern) 연관규칙 적용: 시차에 따른 순서를 의미하지는 않기에 시차에 따른 순서가 중요한 경우, 순서패턴 연관 분석을 고려
  - 예) 웹 사이트 웹 로그 이동경로 분석, 페이지 방문 순서, 이탈율 등

### # 활용 분야
 1. 인터넷, 모바일 서비스 상품 추천 시스템의 구매 항목 간 연관성 분석 (쇼핑, 유통 분야에서 장바구니 분석)
 2. 가맹점, 직영점 구매 행동 패턴 분석
 3. 신용카드 사기 및 보험 청구 사기 등 부정거래 패턴 발견
 4. 금융상품이나 서비스 가입 패턴의 연관성 분석
 5. 생물 정보학 분야에서 단백질과 유전자 패턴 분석 등
